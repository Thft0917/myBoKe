<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PM2 命令笔记</title>
    <link rel="stylesheet" href="../css/pm2.css">
</head>
<body>
    <div class="container">
        <h1>PM2 命令笔记</h1>

        <!-- 启动应用 -->
        <div class="command">
            <div class="command-title">启动应用</div>
            <div class="command-description">
                <code>pm2 start &lt;script&gt; [options]</code><br>
                示例：<br>
                <code>pm2 start app.js</code><br>
                <code>pm2 start app.js --name myapp</code><br>
                <code>pm2 start app.js -i max</code><br>
                <code>pm2 start app.js --watch</code><br>
                <code>pm2 start xmd.js -- -a 45156238 -d 4000</code>
            </div>
        </div>

        <!-- 管理进程 -->
        <div class="command">
            <div class="command-title">管理进程</div>
            <div class="command-description">
                <code>pm2 stop &lt;app_name|id&gt;</code> 停止某个应用<br>
                <code>pm2 restart &lt;app_name|id&gt;</code> 重启某个应用<br>
                <code>pm2 delete &lt;app_name|id&gt;</code> 删除某个应用
            </div>
        </div>

        <!-- 查看进程状态 -->
        <div class="command">
            <div class="command-title">查看进程状态</div>
            <div class="command-description">
                <code>pm2 list</code> 列出所有进程及其状态<br>
                <code>pm2 show &lt;app_name|id&gt;</code> 显示某个应用的详细信息<br>
                <code>pm2 status</code> 显示当前所有进程的状态
            </div>
        </div>

        <!-- 日志管理 -->
        <div class="command">
            <div class="command-title">日志管理</div>
            <div class="command-description">
                <code>pm2 logs</code> 实时查看所有进程的日志<br>
                <code>pm2 logs &lt;app_name|id&gt;</code> 实时查看某个进程的日志<br>
                <code>pm2 flush</code> 清空所有日志文件<br>
                <code>pm2 reloadLogs</code> 重新载入日志文件
            </div>
        </div>

        <!-- 监控资源 -->
        <div class="command">
            <div class="command-title">监控资源</div>
            <div class="command-description">
                <code>pm2 monit</code> 监控 CPU、内存使用情况
            </div>
        </div>

        <!-- 进程控制 -->
        <div class="command">
            <div class="command-title">进程控制</div>
            <div class="command-description">
                <code>pm2 scale &lt;app_name|id&gt; &lt;number&gt;</code> 通过增减实例来扩展或缩减服务
            </div>
        </div>

        <!-- 自动重启与恢复 -->
        <div class="command">
            <div class="command-title">自动重启与恢复</div>
            <div class="command-description">
                <code>pm2 start &lt;script&gt; --watch</code> 启动进程并监控文件变化，文件变动时自动重启<br>
                <code>pm2 reload &lt;app_name|id&gt;</code> 平滑重启应用，保留当前连接
            </div>
        </div>

        <!-- 开机自启动 -->
        <div class="command">
            <div class="command-title">开机自启动</div>
            <div class="command-description">
                <code>pm2-startup install</code> 配置window系统让 PM2 在开机时自动启动进程<br>
                <code>pm2 save</code> 保存当前进程列表，以便在重启时自动恢复<br>
                <code>pm2-startup uninstall</code> 取消开机自启动
            </div>
        </div>

        <!-- 管理配置文件 -->
        <div class="command">
            <div class="command-title">管理配置文件</div>
            <div class="command-description">
                <code>pm2 start ecosystem.config.js</code> 通过配置文件启动应用<br>
                <code>pm2 start process.yml</code> 通过 YAML 格式的配置文件启动<br>
                <code>pm2 startOrReload ecosystem.config.js</code> 通过配置文件启动或平滑重启
            </div>
        </div>

        <!-- 进程快照 -->
        <div class="command">
            <div class="command-title">进程快照</div>
            <div class="command-description">
                <code>pm2 save</code> 保存进程列表和状态到磁盘<br>
                <code>pm2 resurrect</code> 恢复被保存的进程状态<br>
                <code>pm2 reset &lt;app_name|id&gt;</code> 重置某个进程的重启计数
            </div>
        </div>

        <!-- 其他有用命令 -->
        <div class="command">
            <div class="command-title">其他有用命令</div>
            <div class="command-description">
                <code>pm2 kill</code> 停止 PM2 和所有进程<br>
                <code>pm2 update</code> 更新 PM2 运行时<br>
                <code>pm2 reload &lt;app_name|id&gt;</code> 平滑重启应用<br>
                <code>pm2 env &lt;app_name|id&gt;</code> 显示应用的环境变量<br>
                <code>pm2 reset &lt;app_name|id&gt;</code> 重置某个进程的重启计数
            </div>
        </div>

        <div class="button-container">
            <button class="toggle-all">展开/收起所有描述</button>
        </div>
    </div>

    <script src="../js/jquery-3.7.1.min.js"></script>
    <script src="../js/pm2.js"></script>
</body>
</html>